(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))h(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&h(u)}).observe(document,{childList:!0,subtree:!0});function m(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerpolicy&&(l.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?l.credentials="include":c.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function h(c){if(c.ep)return;c.ep=!0;const l=m(c);fetch(c.href,l)}})();/*!
 * FPSMeter 0.3.1 - 9th May 2013
 * https://github.com/Darsain/fpsmeter
 *
 * Licensed under the MIT license.
 * http://opensource.org/licenses/MIT
 */(function(y,s){function m(e){return document.createElement(e)}function h(e,r){for(var t in r)try{e.style[t]=r[t]}catch{}return e}function c(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof e}function l(e,r){if(c(r)!=="array")return-1;if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function u(){var e=arguments;for(var r in e[1])if(e[1].hasOwnProperty(r))switch(c(e[1][r])){case"object":e[0][r]=u({},e[0][r],e[1][r]);break;case"array":e[0][r]=e[1][r].slice(0);break;default:e[0][r]=e[1][r]}return e.length>2?u.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function f(e,r,t){var n,o,p,i,d,T,x,A,b;return t<=.5?i=t*(1+r):i=t+r-t*r,i===0?"#000":(d=2*t-i,T=(i-d)/i,e=6*e,x=Math.floor(e),A=e-x,b=i*T*A,x===0||x===6?(n=i,o=d+b,p=d):x===1?(n=i-b,o=i,p=d):x===2?(n=d,o=i,p=d+b):x===3?(n=d,o=i-b,p=i):x===4?(n=d+b,o=d,p=i):(n=i,o=d,p=i-b),"#"+v(n)+v(o)+v(p))}function v(e){return e=Math.round(e*255).toString(16),e.length===1?"0"+e:e}function k(e,r,t,n){e.addEventListener?e[n?"removeEventListener":"addEventListener"](r,t,!1):e.attachEvent&&e[n?"detachEvent":"attachEvent"]("on"+r,t)}var O;(function(){var e=y.performance;if(e&&(e.now||e.webkitNow)){var r=e.now?"now":"webkitNow";O=e[r].bind(e)}else O=function(){return+new Date}})();var C=y.cancelAnimationFrame||y.cancelRequestAnimationFrame,M=y.requestAnimationFrame;(function(){for(var e=["moz","webkit","o"],r=0,t=0,n=e.length;t<n&&!C;++t)C=y[e[t]+"CancelAnimationFrame"]||y[e[t]+"CancelRequestAnimationFrame"],M=C&&y[e[t]+"RequestAnimationFrame"];C||(M=function(o){var p=O(),i=Math.max(0,16-(p-r));return r=p+i,y.setTimeout(function(){o(p+i)},i)},C=function(o){clearTimeout(o)})})();var _=c(document.createElement("div").textContent)==="string"?"textContent":"innerText";function F(e,r){c(e)==="object"&&e.nodeType===s&&(r=e,e=document.body),e||(e=document.body);var t=this,n=u({},F.defaults,r||{}),o={},p=[],i,d,T=100,x=[],A=0,b=n.threshold,P=0,q=O()-b,E,H=[],z=[],S,j,L=n.show==="fps",N,$,a,w;t.options=n,t.fps=0,t.duration=0,t.isPaused=0,t.tickStart=function(){P=O()},t.tick=function(){E=O(),A=E-q,b+=(A-b)/n.smoothing,t.fps=1e3/b,t.duration=P<q?b:E-P,q=E},t.pause=function(){return S&&(t.isPaused=1,clearTimeout(S),C(S),C(j),S=j=0),t},t.resume=function(){return S||(t.isPaused=0,I()),t},t.set=function(g,R){return n[g]=R,L=n.show==="fps",l(g,X)!==-1&&J(),l(g,Z)!==-1&&Q(),t},t.showDuration=function(){return t.set("show","ms"),t},t.showFps=function(){return t.set("show","fps"),t},t.toggle=function(){return t.set("show",L?"ms":"fps"),t},t.hide=function(){return t.pause(),o.container.style.display="none",t},t.show=function(){return t.resume(),o.container.style.display="block",t};function tt(){for(a=n.history;a--;)H[a]=a===0?t.fps:H[a-1],z[a]=a===0?t.duration:z[a-1]}function D(g,R,U,nt){return d[0|g][Math.round(Math.min((R-U)/(nt-U)*T,T))]}function K(){o.legend.fps!==L&&(o.legend.fps=L,o.legend[_]=L?"FPS":"ms"),$=L?t.fps:t.duration,o.count[_]=$>999?"999+":$.toFixed($>99?0:n.decimals)}function V(){if(E=O(),q<E-n.threshold&&(t.fps-=t.fps/Math.max(1,n.smoothing*60/n.interval),t.duration=1e3/t.fps),tt(),K(),n.heat){if(x.length)for(a=x.length;a--;)x[a].el.style[i[x[a].name].heatOn]=L?D(i[x[a].name].heatmap,t.fps,0,n.maxFps):D(i[x[a].name].heatmap,t.duration,n.threshold,0);if(o.graph&&i.column.heatOn)for(a=p.length;a--;)p[a].style[i.column.heatOn]=L?D(i.column.heatmap,H[a],0,n.maxFps):D(i.column.heatmap,z[a],n.threshold,0)}if(o.graph)for(w=0;w<n.history;w++)p[w].style.height=(L?H[w]?Math.round(N/n.maxFps*Math.min(H[w],n.maxFps)):0:z[w]?Math.round(N/n.threshold*Math.min(z[w],n.threshold)):0)+"px"}function I(){n.interval<20?(S=M(I),V()):(S=setTimeout(I,n.interval),j=M(V))}function Y(g){g=g||window.event,g.preventDefault?(g.preventDefault(),g.stopPropagation()):(g.returnValue=!1,g.cancelBubble=!0),t.toggle()}t.destroy=function(){t.pause(),G(),t.tick=t.tickStart=function(){}};function G(){n.toggleOn&&k(o.container,n.toggleOn,Y,1),e.removeChild(o.container)}function et(){if(i=F.theme[n.theme],d=i.compiledHeatmaps||[],!d.length&&i.heatmaps.length){for(w=0;w<i.heatmaps.length;w++)for(d[w]=[],a=0;a<=T;a++)d[w][a]=f(.33/T*a,i.heatmaps[w].saturation,i.heatmaps[w].lightness);i.compiledHeatmaps=d}}function J(){o.container&&G(),et(),o.container=h(m("div"),i.container),o.count=o.container.appendChild(h(m("div"),i.count)),o.legend=o.container.appendChild(h(m("div"),i.legend)),o.graph=n.graph?o.container.appendChild(h(m("div"),i.graph)):0,x.length=0;for(var g in o)o[g]&&i[g].heatOn&&x.push({name:g,el:o[g]});if(p.length=0,o.graph)for(o.graph.style.width=n.history*i.column.width+(n.history-1)*i.column.spacing+"px",a=0;a<n.history;a++)p[a]=o.graph.appendChild(h(m("div"),i.column)),p[a].style.position="absolute",p[a].style.bottom=0,p[a].style.right=a*i.column.width+a*i.column.spacing+"px",p[a].style.width=i.column.width+"px",p[a].style.height="0px";Q(),K(),e.appendChild(o.container),o.graph&&(N=o.graph.clientHeight),n.toggleOn&&(n.toggleOn==="click"&&(o.container.style.cursor="pointer"),k(o.container,n.toggleOn,Y))}function Q(){h(o.container,n)}(function(){J(),I()})()}F.extend=u,window.FPSMeter=F,F.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var X=["toggleOn","theme","heat","graph","history"],Z=["position","zIndex","left","top","right","bottom","margin"]})(window);(function(y,s,m){s.theme={};var h=s.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};s.theme.dark=s.extend({},h,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),s.theme.light=s.extend({},h,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),s.theme.colorful=s.extend({},h,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),s.theme.transparent=s.extend({},h,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})})(window,FPSMeter);const W=y=>y.substring(1).split("&").filter(s=>s.startsWith("count=")).map(s=>parseInt(s.split("=")[1]))[0],B=y=>y.substring(1).split("&").filter(s=>s.startsWith("type=")).map(s=>s.split("=")[1])[0];class it{constructor(){this.canvas=document.querySelector("#canvas"),this.fpsContainer=document.querySelector(".fps-container"),this.countLinks=document.querySelectorAll(".count-container a"),this.typeLinks=document.querySelectorAll(".options-container a"),canvas.width=1024,canvas.height=480,this.width=this.canvas.width,this.height=this.canvas.height,this.count=0,this.initCountLink(),this.initTypeLink(),this.init()}initFpsmeter(){this.fpsContainer.innerHTML="",this.fpsmeter=new window.FPSMeter(this.fpsContainer,{top:0,left:0,heat:1,theme:"dark",graph:1,history:25,transform:"translateY(-50%)"})}initCountLink(){const s=l=>{this.countLinks.forEach(f=>{f.classList.toggle("active",!1)});const u=[...this.countLinks].filter(f=>f.innerText==l)[0];u?(u.classList.toggle("active",!0),this.count=l):this.countLinks[this.countLinks.length-1].classList.toggle("active",!0)},{search:m,pathname:h}=window.location,c=W(m);this.count=c||1e3,s(this.count),this.countLinks.forEach((l,u)=>{l.addEventListener("click",f=>{f.preventDefault(),f.stopPropagation();const v=parseInt(l.innerText),k=B(m);v&&(k?window.history.replaceState({},h,`?count=${v}&type=${k}`):window.history.replaceState({},h,`?count=${v}`),s(v),this.init(),this.render())})})}initTypeLink(){const s=l=>{this.typeLinks.forEach(f=>{f.classList.toggle("active",!1)});const u=[...this.typeLinks].filter(f=>f.innerText.toLowerCase()==l)[0];u?(u.classList.toggle("active",!0),this.type=l):this.typeLinks[this.typeLinks.length-1].classList.toggle("active",!0)},{search:m,pathname:h}=window.location,c=B(m);this.type=["stroke","fill","sprite"].includes(c)?c:"stroke",s(this.type),this.typeLinks.forEach((l,u)=>{l.addEventListener("click",f=>{f.preventDefault(),f.stopPropagation();const v=l.innerText.toLowerCase(),k=W(m);v&&(k?window.history.replaceState({},h,`?count=${k}&type=${v}`):window.history.replaceState({},h,`?type=${v}`),s(v),this.init(),this.render())})})}initNavLink(){const s=document.querySelectorAll("header > nav > a"),{search:m,pathname:h}=window.location;[...s].forEach(c=>{c.pathname===h&&c.classList.add("active"),c.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation();const u=W(m),f=B(m);let v=u?`${c.pathname}?count=${u}`:c.pathname;f&&(v+=`${u?"&":""}type=${f}`),window.location.href=v})})}init(){this.initFpsmeter(),this.initNavLink()}render(){}}export{it as E};

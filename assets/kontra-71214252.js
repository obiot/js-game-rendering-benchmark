import{E as A}from"./engine-516a9876.js";let w=()=>{},F={};function M(n,...e){(F[n]||[]).map(t=>t(...e))}let r,l,y={get(n,e){return e=="_proxy"?!0:w}};function L(){return l}function S(n,{contextless:e=!1}={}){if(r=document.getElementById(n)||n||document.querySelector("canvas"),e&&(r=r||new Proxy({},y)),!r)throw Error("You must provide a canvas element for the game");return l=r.getContext("2d")||new Proxy({},y),l.imageSmoothingEnabled=!1,M("init"),{canvas:r,context:l}}function k(n){let e=n.canvas;n.clearRect(0,0,e.width,e.height)}function z({fps:n=60,clearCanvas:e=!0,update:t=w,render:i,context:s=L(),blur:d=!1}={}){if(!i)throw Error("You must provide a render() function");let o=0,a=1e3/n,u=1/n,v=e?k:w,c,g,f,m,h,p=!0;d||(window.addEventListener("focus",()=>{p=!0}),window.addEventListener("blur",()=>{p=!1}));function x(){if(g=requestAnimationFrame(x),!!p&&(f=performance.now(),m=f-c,c=f,!(m>1e3))){for(M("tick"),o+=m;o>=a;)h.update(u),o-=a;v(s),h.render()}}return h={update:t,render:i,isStopped:!0,start(){c=performance.now(),this.isStopped=!1,requestAnimationFrame(x)},stop(){this.isStopped=!0,cancelAnimationFrame(g)},_frame:x,set _last(E){c=E}},h}class b extends A{constructor(){super()}init(){if(super.init(),this.canvas.innerHTML="",window.cancelAnimationFrame(this.request),!this.loop){const{context:i}=S();this.ctx=i,this.ctx.strokeStyle="white",this.ctx.lineWidth=1}const e=new Array(this.count),t=[1,-1];for(let i=0;i<this.count;i++){const s=10+Math.random()*80,d=Math.random()*this.width,o=Math.random()*(this.height-s),[a,u]=[3*Math.random()*t[Math.floor(Math.random()*2)],3*Math.random()*t[Math.floor(Math.random()*2)]];e[i]={x:d,y:o,size:s,dx:a,dy:u}}this.particles=e}render(){this.loop||(this.loop=z({update:()=>{for(let e=0;e<this.count;e++){const t=this.particles[e];t.x-=t.dx,t.y-=t.dy,t.x+t.size<0?t.dx*=-1:t.y+t.size<0&&(t.dy*=-1),t.x>this.width?t.dx*=-1:t.y>this.height&&(t.dy*=-1)}this.fpsmeter.tick()},render:()=>{for(let e=0;e<this.count;e++){const t=this.particles[e];this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.size,0,2*Math.PI),this.ctx.stroke()}}}),this.loop.start())}}document.addEventListener("DOMContentLoaded",()=>{new b().render()});
